/********************* COLLATES **********************/

/********************* ROLES **********************/

/********************* UDFS ***********************/

/********************* FUNCTIONS ***********************/

/****************** SEQUENCES ********************/

/******************** DOMAINS *********************/

CREATE DOMAIN COUNTRY_CODE
 AS varchar(8) CHARACTER SET ASCII
 COLLATE ASCII;
CREATE DOMAIN QID
 AS varchar(32) CHARACTER SET ASCII
 COLLATE ASCII;
CREATE DOMAIN TEXT255
 AS varchar(255)
 COLLATE UTF8;
/******************* PROCEDURES ******************/

/******************* PACKAGES ******************/

/******************** TABLES **********************/

CREATE TABLE COUNTRIES
(
  COUNTRY_QID QID NOT NULL,
  COUNTRY_CODE COUNTRY_CODE NOT NULL,
  COUNTRY_LABEL TEXT255 NOT NULL,
  CONSTRAINT PK_COUNTRIES PRIMARY KEY (COUNTRY_QID),
  CONSTRAINT UQ_COUNTRIES_CODE UNIQUE (COUNTRY_CODE)
);
CREATE TABLE PLACES
(
  PLACE_QID QID NOT NULL,
  COUNTRY_QID QID NOT NULL,
  PLACE_LABEL TEXT255 NOT NULL,
  CONSTRAINT PK_PLACES PRIMARY KEY (PLACE_QID)
);
CREATE TABLE PLACE_EXTERNAL_DESCRIPTIONS
(
  ID bigint GENERATED BY DEFAULT AS IDENTITY (START WITH 1) NOT NULL,
  PLACE_QID QID,
  EXTERNAL_TEXT TEXT255,
  CONSTRAINT INTEG_7 PRIMARY KEY (ID)
);
/********************* VIEWS **********************/

/******************* EXCEPTIONS *******************/

/******************** TRIGGERS ********************/

/******************** DB TRIGGERS ********************/

/******************** DDL TRIGGERS ********************/


CREATE INDEX IDX_COUNTRIES_LABEL ON COUNTRIES (COUNTRY_LABEL);
ALTER TABLE PLACES ADD CONSTRAINT FK_PLACES_0
  FOREIGN KEY (COUNTRY_QID) REFERENCES COUNTRIES (COUNTRY_QID) ON UPDATE CASCADE ON DELETE CASCADE;
CREATE INDEX IDX_PLACES_LABEL ON PLACES (PLACE_LABEL);
GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON COUNTRIES TO  SYSDBA WITH GRANT OPTION GRANTED BY SYSDBA;

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON PLACES TO  SYSDBA WITH GRANT OPTION GRANTED BY SYSDBA;

GRANT DELETE, INSERT, REFERENCES, SELECT, UPDATE
 ON PLACE_EXTERNAL_DESCRIPTIONS TO  SYSDBA WITH GRANT OPTION GRANTED BY SYSDBA;

